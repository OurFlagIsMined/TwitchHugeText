var lettersTables = {
    lines: {'0':['\u2552\u2555','\u2551\u2551','\u2558\u255b'],'1':['\u2551','\u2551','\u2551'],'2':['\u2550\u2555','\u2552\u255b','\u2558\u2550'],'3':['\u2550\u2555','\u2550\u2561','\u2550\u255b'],'4':['\u2551\u2551','\u255a\u2563','\u2591\u2551'],'5':['\u2554\u2550','\u2559\u2556','\u2550\u255c'],'6':['\u2553\u2550','\u255f\u2556','\u2559\u255c'],'7':['\u2550\u2555','\u2591\u2551','\u2591\u2551'],'8':['\u2553\u2556','\u255f\u2562','\u2559\u255c'],'9':['\u2553\u2556','\u2559\u2562','\u2591\u2551'],'22':['\u2550\u2550\u2555','\u2552\u2550\u255b','\u2558\u2550\u2550'],'32':['\u2550\u2550\u2555','\u2550\u2550\u2561','\u2550\u2550\u255b'],'42':['\u2551\u2591\u2551','\u255a\u2550\u2563','\u2591\u2591\u2551'],'52':['\u2554\u2550\u2550','\u2559\u2550\u2556','\u2550\u2550\u255c'],'62':['\u2553\u2550\u2550','\u255f\u2550\u2556','\u2559\u2550\u255c'],'72':['\u2550\u2550\u2555','\u2591\u2591\u2551','\u2591\u2591\u2551'],'73':['\u2550\u2555','\u2552\u255c','\u2551\u2591'],'74':['\u2550\u2550\u2555','\u2591\u2552\u255c','\u2591\u2551\u2591'],'82':['\u2553\u2550\u2556','\u255f\u2550\u2562','\u2559\u2550\u255c'],'92':['\u2553\u2550\u2556','\u2559\u2550\u2562','\u2591\u2591\u2551'],'A':['\u2553\u2550\u2556','\u2560\u2550\u2563','\u2551\u2591\u2551'],'B':['\u2554\u2556\u2591','\u2560\u2569\u2556','\u255a\u2550\u255c'],'C':['\u2553\u2550','\u2551\u2591','\u2559\u2550'],'C2':['\u2553\u2550\u2550','\u2551\u2591\u2591','\u2559\u2550\u2550'],'D':['\u2554\u2550\u2556','\u2551\u2591\u2551','\u255a\u2550\u255c'],'E':['\u2554\u2550','\u2560\u2550','\u255a\u2550'],'E2':['\u2554\u2550\u2550','\u2560\u2550\u2550','\u255a\u2550\u2550'],'F':['\u2554\u2550','\u2560\u2550','\u2551\u2591'],'F2':['\u2554\u2550\u2550','\u2560\u2550\u2550','\u2551\u2591\u2591'],'G':['\u2553\u2550\u2591','\u2551\u2591\u2556','\u2559\u2550\u255c'],'H':['\u2551\u2591\u2551','\u2560\u2550\u2563','\u2551\u2591\u2551'],'I':['\u2565','\u2551','\u2568'],'J':['\u2591\u2551','\u2591\u2551','\u2559\u255c'],'K':['\u2551\u2552\u255b','\u2560\u2567\u2556','\u2551\u2591\u2551'],'L':['\u2551\u2591','\u2551\u2591','\u255a\u2550'],'L2':['\u2551\u2591\u2591','\u2551\u2591\u2591','\u255a\u2550\u2550'],'M':['\u2553\u2566\u2556','\u2551\u2568\u2551','\u2551\u2591\u2551'],'N':['\u2554\u2557\u2551','\u2551\u2551\u2551','\u2551\u255a\u255d'],'O':['\u2553\u2550\u2556','\u2551\u2591\u2551','\u2559\u2550\u255c'],'P':['\u2554\u2556','\u2560\u255c','\u2551\u2591'],'P2':['\u2554\u2550\u2556','\u2560\u2550\u255c','\u2551\u2591\u2591'],'Q':['\u2553\u2550\u2556','\u2551\u2591\u2551','\u2559\u2550\u2569'],'R':['\u2554\u2556\u2591','\u2560\u2569\u2556','\u2551\u2591\u2551'],'S':['\u2553\u2550','\u2559\u2557','\u2550\u255c'],'S2':['\u2553\u2550\u2550','\u2559\u2550\u2557','\u2550\u2550\u255c'],'T':['\u2550\u2566\u2550','\u2591\u2551\u2591','\u2591\u2551\u2591'],'U':['\u2551\u2591\u2551','\u2551\u2591\u2551','\u2559\u2550\u255c'],'U2':['\u2551\u2551','\u2551\u2551','\u2559\u255c'],'V':['\u2551\u2591\u2551','\u2551\u2552\u255b','\u2560\u255b\u2591'],'V2':['\u2551\u2551','\u2551\u2551','\u2558\u255b'],'W':['\u2551\u2591\u2551','\u2551\u2565\u2551','\u2559\u2569\u255c'],'X':['\u2558\u2564\u255b','\u2553\u2567\u2556','\u2551\u2591\u2551'],'Y':['\u2551\u2591\u2551','\u2559\u2566\u255c','\u2591\u2551\u2591'],'Z':['\u2550\u2555\u2591','\u2552\u255b\u2591','\u2558\u2550\u2550'],'02':['\u2552\u2550\u2555','\u2551\u2591\u2551','\u2558\u2550\u255b'],'a':['\u2591\u2591','\u2553\u2556','\u2559\u2568'],'b':['\u2551\u2591','\u2560\u2556','\u2559\u255c'],'c':['\u2591\u2591','\u2553\u2550','\u2559\u2550'],'d':['\u2591\u2551','\u2553\u2563','\u2559\u255c'],'e':['\u2553\u2556','\u2560\u255c','\u2559\u2550'],'f':['\u2553\u2550','\u2560\u2550','\u2551\u2591'],'g':['\u2553\u2556','\u2559\u2563','\u2550\u255c'],'h':['\u2551\u2591','\u2560\u2556','\u2551\u2551'],'i':['\u2591','\u2565','\u2568'],'j':['\u2591\u2591','\u2591\u2551','\u2559\u255c'],'k':['\u2591\u2591','\u255f\u255c','\u255f\u2556'],'k2':['\u2551\u2551\u2591','\u255f\u2568\u2556','\u2551\u2591\u2551'],'l':['\u2591','\u2551','\u2551'],'m':['\u2591\u2591\u2591','\u2553\u2566\u2556','\u2551\u2551\u2551'],'n':['\u2591\u2591','\u2553\u2556','\u2551\u2551'],'o':['\u2591\u2591','\u2553\u2556','\u2559\u255c'],'p':['\u2554\u2556','\u2560\u255c','\u2551\u2591'],'q':['\u2553\u2556','\u2559\u2562','\u2591\u2551'],'r':['\u2591','\u2560','\u2551'],'r2':['\u2591\u2591','\u255f\u2550','\u2551\u2591'],'s':['\u2552\u2550','\u2558\u2555','\u2550\u255b'],'s2':['\u2553\u2550','\u2559\u2556','\u2550\u255c'],'t':['\u2591','\u256c','\u2551'],'u':['\u2591\u2591','\u2551\u2551','\u2559\u255c'],'v':['\u2591\u2591','\u2551\u2551','\u2558\u255b'],'w':['\u2591\u2591\u2591','\u2551\u2551\u2551','\u2559\u2568\u255c'],'x':['\u2591\u2591\u2591','\u2558\u2564\u255b','\u2553\u2567\u2556'],'y':['\u2591\u2591\u2591','\u2559\u2566\u255c','\u2591\u2551\u2591'],'z':['\u2550\u2555','\u2552\u255b','\u2558\u2550'],' ':['\u2591\u2591','\u2591\u2591','\u2591\u2591'],'*':['','','']},
    blocksRound: {'0':['\u2584\u2580\u2584','\u2588\u2591\u2588','\u2591\u2580\u2591'],'1':['\u2584\u2588','\u2591\u2588','\u2591\u2580'],'2':['\u2580\u2580\u2584','\u2584\u2580\u2591','\u2580\u2580\u2580'],'3':['\u2580\u2580\u2584','\u2591\u2580\u2584','\u2580\u2580\u2591'],'4':['\u2588\u2591\u2588','\u2580\u2580\u2588','\u2591\u2591\u2580'],'5':['\u2588\u2580\u2580','\u2580\u2580\u2584','\u2580\u2580\u2591'],'6':['\u2584\u2580\u2580','\u2588\u2580\u2584','\u2591\u2580\u2591'],'7':['\u2580\u2580\u2588','\u2584\u2580\u2591','\u2580\u2591\u2591'],'8':['\u2584\u2580\u2584','\u2584\u2580\u2584','\u2591\u2580\u2591'],'9':['\u2584\u2580\u2584','\u2591\u2580\u2588','\u2591\u2591\u2580'],'A':['\u2584\u2580\u2584','\u2588\u2580\u2588','\u2580\u2591\u2580'],'B':['\u2588\u2580\u2584','\u2588\u2580\u2588','\u2580\u2580\u2591'],'C':['\u2584\u2580\u2580','\u2588\u2591\u2591','\u2591\u2580\u2580'],'D':['\u2588\u2580\u2584','\u2588\u2591\u2588','\u2580\u2580\u2591'],'E':['\u2588\u2580\u2580','\u2588\u2580\u2591','\u2580\u2580\u2580'],'F':['\u2588\u2580\u2580','\u2588\u2580\u2580','\u2580\u2591\u2591'],'G':['\u2584\u2580\u2580','\u2588\u2591\u2588','\u2591\u2580\u2580'],'H':['\u2588\u2591\u2588','\u2588\u2580\u2588','\u2580\u2591\u2580'],'I':['\u2580\u2588\u2580','\u2591\u2588\u2591','\u2580\u2580\u2580'],'J':['\u2591\u2591\u2588','\u2584\u2591\u2588','\u2591\u2580\u2591'],'K':['\u2588\u2591\u2588','\u2588\u2580\u2584','\u2580\u2591\u2580'],'L':['\u2588\u2591\u2591','\u2588\u2591\u2591','\u2580\u2580\u2580'],'M':['\u2584\u2580\u2584\u2580\u2584','\u2588\u2591\u2588\u2591\u2588','\u2580\u2591\u2591\u2591\u2580'],'N':['\u2588\u2584\u2591\u2588','\u2588\u2580\u2584\u2588','\u2580\u2591\u2591\u2580'],'O':['\u2584\u2580\u2580\u2584','\u2588\u2591\u2591\u2588','\u2591\u2580\u2580\u2591'],'P':['\u2588\u2580\u2584','\u2588\u2580\u2591','\u2580\u2591\u2591'],'Q':['\u2584\u2580\u2584\u2591','\u2588\u2591\u2588\u2591','\u2591\u2580\u2580\u2584'],'R':['\u2588\u2580\u2584','\u2588\u2580\u2584','\u2580\u2591\u2580'],'S':['\u2584\u2580\u2580','\u2591\u2580\u2584','\u2580\u2580\u2591'],'T':['\u2580\u2588\u2580','\u2591\u2588\u2591','\u2591\u2580\u2591'],'U':['\u2588\u2591\u2588','\u2588\u2591\u2588','\u2591\u2580\u2591'],'V':['\u2588\u2591\u2588','\u2580\u2584\u2580','\u2591\u2580\u2591'],'W':['\u2588\u2591\u2584\u2591\u2588','\u2588\u2591\u2588\u2591\u2588','\u2591\u2580\u2591\u2580\u2591'],'X':['\u2588\u2591\u2588','\u2584\u2580\u2584','\u2580\u2591\u2580'],'Y':['\u2588\u2591\u2588','\u2591\u2588\u2591','\u2591\u2580\u2591'],'Z':['\u2580\u2580\u2588','\u2584\u2580\u2591','\u2580\u2580\u2580'],'a':['\u2584\u2580\u2584','\u2588\u2580\u2588','\u2580\u2591\u2580'],'b':['\u2588\u2580\u2584','\u2588\u2580\u2588','\u2580\u2580\u2591'],'c':['\u2584\u2580\u2580','\u2588\u2591\u2591','\u2591\u2580\u2580'],'d':['\u2588\u2580\u2584','\u2588\u2591\u2588','\u2580\u2580\u2591'],'e':['\u2588\u2580\u2580','\u2588\u2580\u2591','\u2580\u2580\u2580'],'f':['\u2588\u2580\u2580','\u2588\u2580\u2580','\u2580\u2591\u2591'],'g':['\u2584\u2580\u2580','\u2588\u2591\u2588','\u2591\u2580\u2580'],'h':['\u2588\u2591\u2588','\u2588\u2580\u2588','\u2580\u2591\u2580'],'i':['\u2580\u2588\u2580','\u2591\u2588\u2591','\u2580\u2580\u2580'],'j':['\u2591\u2591\u2588','\u2584\u2591\u2588','\u2591\u2580\u2591'],'k':['\u2588\u2591\u2588','\u2588\u2580\u2584','\u2580\u2591\u2580'],'l':['\u2588\u2591\u2591','\u2588\u2591\u2591','\u2580\u2580\u2580'],'m':['\u2584\u2580\u2584\u2580\u2584','\u2588\u2591\u2588\u2591\u2588','\u2580\u2591\u2591\u2591\u2580'],'n':['\u2588\u2584\u2591\u2588','\u2588\u2580\u2584\u2588','\u2580\u2591\u2591\u2580'],'o':['\u2584\u2580\u2580\u2584','\u2588\u2591\u2591\u2588','\u2591\u2580\u2580\u2591'],'p':['\u2588\u2580\u2584','\u2588\u2580\u2591','\u2580\u2591\u2591'],'q':['\u2584\u2580\u2584\u2591','\u2588\u2591\u2588\u2591','\u2591\u2580\u2580\u2584'],'r':['\u2588\u2580\u2584','\u2588\u2580\u2584','\u2580\u2591\u2580'],'s':['\u2584\u2580\u2580','\u2591\u2580\u2584','\u2580\u2580\u2591'],'t':['\u2580\u2588\u2580','\u2591\u2588\u2591','\u2591\u2580\u2591'],'u':['\u2588\u2591\u2588','\u2588\u2591\u2588','\u2591\u2580\u2591'],'v':['\u2588\u2591\u2588','\u2580\u2584\u2580','\u2591\u2580\u2591'],'w':['\u2588\u2591\u2584\u2591\u2588','\u2588\u2591\u2588\u2591\u2588','\u2591\u2580\u2591\u2580\u2591'],'x':['\u2588\u2591\u2588','\u2584\u2580\u2584','\u2580\u2591\u2580'],'y':['\u2588\u2591\u2588','\u2591\u2588\u2591','\u2591\u2580\u2591'],'z':['\u2580\u2580\u2588','\u2584\u2580\u2591','\u2580\u2580\u2580'],' ':['\u2591\u2591','\u2591\u2591','\u2591\u2591'],'*':['\u2591','\u2591','\u2591']},
    blocksSquare: {'0':['\u2588\u2580\u2588','\u2588\u2591\u2588','\u2580\u2580\u2580'],'1':['\u2584\u2588','\u2591\u2588','\u2591\u2580'],'2':['\u2580\u2580\u2584','\u2584\u2580\u2591','\u2580\u2580\u2580'],'3':['\u2580\u2580\u2588','\u2580\u2580\u2588','\u2580\u2580\u2580'],'4':['\u2588\u2591\u2588','\u2580\u2580\u2588','\u2591\u2591\u2580'],'5':['\u2588\u2580\u2580','\u2580\u2580\u2584','\u2580\u2580\u2591'],'6':['\u2588\u2580\u2580','\u2588\u2580\u2588','\u2580\u2580\u2580'],'7':['\u2580\u2580\u2588','\u2591\u2591\u2588','\u2591\u2591\u2580'],'8':['\u2588\u2580\u2588','\u2588\u2580\u2588','\u2580\u2580\u2580'],'9':['\u2588\u2580\u2588','\u2580\u2580\u2588','\u2591\u2591\u2580'],'A':['\u2584\u2580\u2584','\u2588\u2580\u2588','\u2580\u2591\u2580'],'B':['\u2588\u2580\u2584','\u2588\u2580\u2588','\u2580\u2580\u2591'],'C':['\u2588\u2580\u2580','\u2588\u2591\u2591','\u2580\u2580\u2580'],'D':['\u2588\u2580\u2584','\u2588\u2591\u2588','\u2580\u2580\u2591'],'E':['\u2588\u2580\u2580','\u2588\u2580\u2591','\u2580\u2580\u2580'],'F':['\u2588\u2580\u2580','\u2588\u2580\u2580','\u2580\u2591\u2591'],'G':['\u2584\u2580\u2580','\u2588\u2591\u2588','\u2591\u2580\u2580'],'H':['\u2588\u2591\u2588','\u2588\u2580\u2588','\u2580\u2591\u2580'],'I':['\u2580\u2588\u2580','\u2591\u2588\u2591','\u2580\u2580\u2580'],'J':['\u2591\u2591\u2588','\u2584\u2591\u2588','\u2580\u2580\u2580'],'K':['\u2588\u2591\u2588','\u2588\u2580\u2584','\u2580\u2591\u2580'],'L':['\u2588\u2591\u2591','\u2588\u2591\u2591','\u2580\u2580\u2580'],'M':['\u2588\u2580\u2588\u2580\u2588','\u2588\u2591\u2588\u2591\u2588','\u2580\u2591\u2591\u2591\u2580'],'N':['\u2588\u2584\u2591\u2588','\u2588\u2580\u2584\u2588','\u2580\u2591\u2591\u2580'],'O':['\u2588\u2580\u2580\u2588','\u2588\u2591\u2591\u2588','\u2580\u2580\u2580\u2580'],'P':['\u2588\u2580\u2588','\u2588\u2580\u2580','\u2580\u2591\u2591'],'Q':['\u2588\u2580\u2588\u2591','\u2588\u2591\u2588\u2591','\u2580\u2580\u2580\u2584'],'R':['\u2588\u2580\u2588','\u2588\u2580\u2584','\u2580\u2591\u2580'],'S':['\u2588\u2580\u2580','\u2580\u2580\u2588','\u2580\u2580\u2580'],'T':['\u2580\u2588\u2580','\u2591\u2588\u2591','\u2591\u2580\u2591'],'U':['\u2588\u2591\u2588','\u2588\u2591\u2588','\u2580\u2580\u2580'],'V':['\u2588\u2591\u2588','\u2588\u2591\u2588','\u2591\u2580\u2591'],'W':['\u2588\u2591\u2584\u2591\u2588','\u2588\u2591\u2588\u2591\u2588','\u2580\u2580\u2580\u2580\u2580'],'X':['\u2588\u2591\u2588','\u2584\u2580\u2584','\u2580\u2591\u2580'],'Y':['\u2588\u2591\u2588','\u2591\u2588\u2591','\u2591\u2580\u2591'],'Z':['\u2580\u2580\u2588','\u2584\u2580\u2591','\u2580\u2580\u2580'],'a':['\u2584\u2580\u2584','\u2588\u2580\u2588','\u2580\u2591\u2580'],'b':['\u2588\u2580\u2584','\u2588\u2580\u2588','\u2580\u2580\u2591'],'c':['\u2588\u2580\u2580','\u2588\u2591\u2591','\u2580\u2580\u2580'],'d':['\u2588\u2580\u2584','\u2588\u2591\u2588','\u2580\u2580\u2591'],'e':['\u2588\u2580\u2580','\u2588\u2580\u2591','\u2580\u2580\u2580'],'f':['\u2588\u2580\u2580','\u2588\u2580\u2580','\u2580\u2591\u2591'],'g':['\u2584\u2580\u2580','\u2588\u2591\u2588','\u2591\u2580\u2580'],'h':['\u2588\u2591\u2588','\u2588\u2580\u2588','\u2580\u2591\u2580'],'i':['\u2580\u2588\u2580','\u2591\u2588\u2591','\u2580\u2580\u2580'],'j':['\u2591\u2591\u2588','\u2584\u2591\u2588','\u2580\u2580\u2580'],'k':['\u2588\u2591\u2588','\u2588\u2580\u2584','\u2580\u2591\u2580'],'l':['\u2588\u2591\u2591','\u2588\u2591\u2591','\u2580\u2580\u2580'],'m':['\u2588\u2580\u2588\u2580\u2588','\u2588\u2591\u2588\u2591\u2588','\u2580\u2591\u2591\u2591\u2580'],'n':['\u2588\u2584\u2591\u2588','\u2588\u2580\u2584\u2588','\u2580\u2591\u2591\u2580'],'o':['\u2588\u2580\u2580\u2588','\u2588\u2591\u2591\u2588','\u2580\u2580\u2580\u2580'],'p':['\u2588\u2580\u2588','\u2588\u2580\u2580','\u2580\u2591\u2591'],'q':['\u2588\u2580\u2588\u2591','\u2588\u2591\u2588\u2591','\u2580\u2580\u2580\u2584'],'r':['\u2588\u2580\u2588','\u2588\u2580\u2584','\u2580\u2591\u2580'],'s':['\u2588\u2580\u2580','\u2580\u2580\u2588','\u2580\u2580\u2580'],'t':['\u2580\u2588\u2580','\u2591\u2588\u2591','\u2591\u2580\u2591'],'u':['\u2588\u2591\u2588','\u2588\u2591\u2588','\u2580\u2580\u2580'],'v':['\u2588\u2591\u2588','\u2588\u2591\u2588','\u2591\u2580\u2591'],'w':['\u2588\u2591\u2584\u2591\u2588','\u2588\u2591\u2588\u2591\u2588','\u2580\u2580\u2580\u2580\u2580'],'x':['\u2588\u2591\u2588','\u2584\u2580\u2584','\u2580\u2591\u2580'],'y':['\u2588\u2591\u2588','\u2591\u2588\u2591','\u2591\u2580\u2591'],'z':['\u2580\u2580\u2588','\u2584\u2580\u2591','\u2580\u2580\u2580'],' ':['\u2591\u2591','\u2591\u2591','\u2591\u2591'],'*':['\u2591','\u2591','\u2591']},
}

var lettersCreate = function(str) {
    var out = ['', '', ''];
    for (var i=0; i<str.length; i++) {
        out[0] += lettersTables[letters.style][str[i]][0];
        out[1] += lettersTables[letters.style][str[i]][1];
        out[2] += lettersTables[letters.style][str[i]][2];
    };
    return out.join(' ');
};

var letters = {
    locktime: 200,
    locked: false,
    space: '\u2591',
    spaceSize: 2,
    allcaps: true,
    limit: 469,
    warn: true,
    style: 'lines',
};

var lettersUpdate = function() {
    var input = document.querySelectorAll('textarea.text-input')[0].value;
    if (letters.allcaps) {
        input = input.toUpperCase();
    }
    var input2 = input.replace(/\r\n/g,'\n').replace(/[^A-Za-z0-9 \n]/g,'').replace(/([A-Za-z0-9])([A-Za-z0-9])/g,'$1*$2').replace(/([A-Za-z0-9])([A-Za-z0-9])/g,'$1*$2').split('\n');
    var out = [];
    for (var i=0; i<input2.length; i++) {
        out.push(lettersCreate(input2[i]));
    }
    var out2 = out.join(' ');
    document.querySelectorAll('div.chat-line')[0].innerHTML = out2;
    if (letters.warn) {
        document.querySelectorAll('div.chat-warn')[0].style.visibility = out2.length > letters.limit ? 'visible' : 'hidden';
    }
};

var lettersChanged = function() {
    if (!letters.locked) {
        letters.locked = true;
        setTimeout(function() {
            letters.locked=false;
            lettersUpdate();
        }, letters.locktime);
        lettersUpdate();
    }
};

var lettersSpaceSize = function(size) {
    if (size) {
        letters.spaceSize = size;
    }
    var space = '';
    for (var i=0; i<letters.spaceSize; i++) {
        space += letters.space;
    }
    for (key in lettersTables) {
        lettersTables[key][' '] = [space, space, space];
    }
};

var lettersAllcaps=function(state){
    letters.allcaps=state;
}

var lettersStyle=function(style){
    letters.style=style;
}

var settingsSet={
    'settings-space-size':function(id){lettersSpaceSize(Number(id));lettersUpdate();},
    'settings-allcaps':function(id){lettersAllcaps(id==='on'?true:false);lettersUpdate();},
    'settings-style':function(id){lettersStyle(id);lettersUpdate();},
}

var settingsClick=function(event){
    var target=event.target;
    var parent=target.parentElement;
    var children=parent.children;
    var setting=parent.getAttribute('id');
    var id=target.getAttribute('id');
    settingsSet[setting](id);
    for(var i=0;i<children.length;i++){children[i].setAttribute('class',children[i]===target?'setting-on':'setting-off');}
};

var copyClick=function(){
    var selection=chatSelect(document.querySelectorAll('div.chat-line')[0]);
    document.execCommand('copy');
    selection.removeAllRanges();
    
    var button=document.querySelectorAll('div.chat-copy-inner')[0];
    button.className='chat-copy-inner chat-copy-inner-click';
    setTimeout(function(){button.className='chat-copy-inner';},100);
    
    document.querySelectorAll('textarea.text-input')[0].focus();
};

var clearClick=function(){
    document.querySelectorAll('textarea.text-input')[0].value='';
    document.querySelectorAll('div.chat-line')[0].innerHTML='';
    
    var button=document.querySelectorAll('div.chat-clear-inner')[0];
    button.className='chat-clear-inner chat-clear-inner-click';
    setTimeout(function(){button.className='chat-clear-inner';},100);
    
    document.querySelectorAll('textarea.text-input')[0].focus();
};

/*** CREDIT FOR TEXT SELECT FUNCTION (slightly modified from its original form)
  * http://stackoverflow.com/questions/8802857/select-all-contents-of-a-div
  * http://jsfiddle.net/KcX6A/304/
  **/
var chatSelect = function(text) {
    var doc = document;   
    if (doc.body.createTextRange) {
        var range = document.body.createTextRange();
        range.moveToElementText(text);
        range.select();
    } else if (window.getSelection) {
        var selection = window.getSelection();
        if (selection.setBaseAndExtent) {
            selection.setBaseAndExtent(text, 0, text, 1);
        } else {
            var range = document.createRange();
            range.selectNodeContents(text);
            selection.removeAllRanges();
            selection.addRange(range);
        }
    }
    return selection;
};

/*** CREDIT FOR CHROME DETECT FUNCTION
  * http://stackoverflow.com/questions/4565112/javascript-how-to-find-out-if-the-user-browser-is-chrome
  **/
var detectChrome = function() {
    var isChromium = window.chrome,
        vendorName = window.navigator.vendor,
        isOpera = window.navigator.userAgent.indexOf("OPR") > -1,
        isIEedge = window.navigator.userAgent.indexOf("Edge") > -1;
    if(isChromium !== null && isChromium !== undefined && vendorName === "Google Inc." && isOpera == false && isIEedge == false) {
        return true;
    } else {
        return false;
    }
};

var main = function() {
    lettersSpaceSize();
    
    document.querySelectorAll('textarea.text-input')[0].oninput = function() {
        lettersChanged();
    };
    
    if (detectChrome()) {
        var copyButton = document.querySelectorAll('div.chat-copy')[0];
        copyButton.style.display = '';
        copyButton.onclick=copyClick;
    }
    
    var clearButton = document.querySelectorAll('div.chat-clear')[0];
    clearButton.style.display = '';
    clearButton.onclick=clearClick;
    
    var settings=document.querySelectorAll('div.chat-settings div.chat-setting span');
    for(var i=0;i<settings.length;i++){
        settings[i].onclick=settingsClick;
    }
    
    document.querySelectorAll('textarea.text-input')[0].focus();
};